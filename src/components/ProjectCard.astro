---
import type { ProjectItem } from "../lib/types";

interface Props {
  project: ProjectItem;
  index?: number;
}

const { project, index = 0 } = Astro.props;

const statusStyles: Record<ProjectItem["status"], string> = {
  active: "status-chip-active",
  research: "status-chip-research",
  archived: "status-chip-archived",
};

const number = String(index + 1).padStart(2, "0");
---

<a
  href={`/projects/${project.slug}`}
  class="project-card-enhanced reveal-scale shine-hover"
  style={`--d: ${index + 1}`}
  data-track-event="click_project_open"
  data-tilt
>
  <div class="flex items-start justify-between gap-3">
    <div class="flex items-center gap-3">
      <span class="card-number">{number}</span>
      <span class:list={["status-chip", statusStyles[project.status]]}>
        {project.status}
      </span>
    </div>
    <span class="project-card-arrow" aria-hidden="true">&#8599;</span>
  </div>

  <h3 class="mt-5 text-2xl font-semibold tracking-[-0.02em] text-ink md:text-[1.75rem]">{project.title}</h3>

  <p class="mt-3 text-sm leading-relaxed text-ink-soft">{project.summary}</p>

  <div class="project-card-tags">
    {project.tags.slice(0, 4).map((tag) => (
      <span class="project-card-tag">{tag}</span>
    ))}
  </div>
</a>
